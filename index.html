<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ë„ì¿„ ì—¬í–‰ ê°€ì´ë“œ (AI Edition)</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React & ReactDOM (Production) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. Pretendard Font -->
    <style>
        @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");
        
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #fff1f2; /* rose-50 */
        }

        /* ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slideDown {
            animation: slideDown 0.3s ease-out forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slideUp {
            animation: slideUp 0.3s ease-out forwards;
        }

        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 10s linear infinite;
        }
        
        /* ë²šê½ƒ íš¨ê³¼ */
        .sakura-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .sakura {
            position: absolute;
            background-color: #ffd7e6;
            border-radius: 100% 0 100% 0;
            opacity: 0.6;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { opacity: 0; top: -10%; transform: translateX(0) rotate(0deg); }
            10% { opacity: 1; }
            100% { opacity: 0; top: 100%; transform: translateX(20px) rotate(360deg); }
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* ë” ê°•í•œ í˜•ê´‘ íš¨ê³¼ (ì¶”ì²œ ë§›ì§‘ ì´ë¦„ìš©) */
        .recommend-highlight {
            background-color: #bef264; /* Lime-300 */
            color: #1a2e05;
            padding: 1px 4px;
            border-radius: 3px;
            font-weight: 800;
        }

        /* ë§ˆí¬ë‹¤ìš´ ìŠ¤íƒ€ì¼ (ì±„íŒ…) */
        .prose p { margin-bottom: 0.5em; }
        .prose ul { list-style-type: disc; padding-left: 1.2em; margin-bottom: 0.5em; }
        .prose strong { font-weight: 700; color: #ec4899; }
    </style>
</head>
<body class="text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ì•„ì´ì½˜ (SVG) ---
        const Icon = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const Train = (props) => <Icon {...props}><rect width="16" height="16" x="4" y="3" rx="2" /><path d="M4 11h16" /><path d="M12 3v8" /><path d="m8 19-2 3" /><path d="m18 22-2-3" /><path d="M8 15h0" /><path d="M16 15h0" /></Icon>;
        const Flower = (props) => <Icon {...props}><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"/></Icon>;
        const MapIcon = (props) => <Icon {...props}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21" /><line x1="9" x2="9" y1="3" y2="18" /><line x1="15" x2="15" y1="6" y2="21" /></Icon>;
        const ChevronDown = (props) => <Icon {...props}><path d="m6 9 6 6 6-6"/></Icon>;
        const ChevronUp = (props) => <Icon {...props}><path d="m18 15-6-6-6 6"/></Icon>;
        const Sparkles = (props) => <Icon {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></Icon>;
        const Send = (props) => <Icon {...props}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></Icon>;
        const X = (props) => <Icon {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></Icon>;
        
        // ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ì½˜ ì„ íƒ
        const Plane = (props) => <Icon {...props}><path d="M2 12h20"/><path d="M13 2v10"/><path d="M13 12v10"/><path d="M9 12 13 2l4 10"/><path d="M9 12 13 22l4-10"/></Icon>;
        const Bed = (props) => <Icon {...props}><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></Icon>;
        const Utensils = (props) => <Icon {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></Icon>;
        const Coffee = (props) => <Icon {...props}><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" x2="6" y1="2" y2="4"/><line x1="10" x2="10" y1="2" y2="4"/><line x1="14" x2="14" y1="2" y2="4"/></Icon>;
        const ShoppingBag = (props) => <Icon {...props}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></Icon>;
        const Camera = (props) => <Icon {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></Icon>;

        // --- ë²šê½ƒ ë°°ê²½ íš¨ê³¼ ---
        const SakuraEffect = () => {
            const [petals, setPetals] = useState([]);
            useEffect(() => {
                const initialPetals = Array.from({ length: 12 }).map(() => ({
                    id: Math.random(),
                    left: Math.random() * 100 + '%',
                    animationDuration: Math.random() * 5 + 8 + 's',
                    width: Math.random() * 10 + 8 + 'px',
                    height: Math.random() * 10 + 8 + 'px',
                }));
                setPetals(initialPetals);
            }, []);
            return (
                <div className="sakura-container">
                    {petals.map(petal => (
                        <div key={petal.id} className="sakura" style={{ left: petal.left, animationDuration: petal.animationDuration, width: petal.width, height: petal.height }} />
                    ))}
                </div>
            );
        };

        const CategoryIcon = ({ type }) => {
            switch (type) {
                case 'food': return <Utensils className="w-4 h-4 text-orange-500" />;
                case 'cafe': return <Coffee className="w-4 h-4 text-amber-700" />;
                case 'shopping': return <ShoppingBag className="w-4 h-4 text-purple-500" />;
                case 'sightseeing': return <Camera className="w-4 h-4 text-blue-500" />;
                case 'theme_park': return <Star className="w-4 h-4 text-yellow-500 fill-yellow-500" />;
                case 'accommodation': return <Bed className="w-4 h-4 text-indigo-500" />;
                case 'flight': return <Plane className="w-4 h-4 text-sky-500" />;
                default: return <div className="w-4 h-4 rounded-full bg-gray-300"></div>;
            }
        };

        // --- Gemini Chat Component ---
        const GeminiChat = ({ isOpen, onClose, itineraryData }) => {
            const [messages, setMessages] = useState([
                { role: 'model', text: 'ì•ˆë…•í•˜ì„¸ìš”! ë„ì¿„ ì—¬í–‰ ì¼ì •ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹ ê°€ìš”? ë§›ì§‘ ì¶”ì²œì´ë‚˜ ì¼ë³¸ì–´ ë²ˆì—­ë„ ë„ì™€ë“œë¦´ê²Œìš”! âœ¨' }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages, isOpen]);

            const handleSend = async () => {
                if (!input.trim() || isLoading) return;

                const userMessage = input.trim();
                setInput('');
                setMessages(prev => [...prev, { role: 'user', text: userMessage }]);
                setIsLoading(true);

                try {
                    const apiKey = "AIzaSyBLQ8GHJJC5V5qCSBOZY2Y2mXXPqhlIovg"; // Runtime Environment will provide this
                    const systemPrompt = `
                        ë‹¹ì‹ ì€ 2026ë…„ 1ì›” 28ì¼ë¶€í„° 2ì›” 3ì¼ê¹Œì§€ì˜ ë„ì¿„ ì—¬í–‰ì„ ë•ëŠ” 'AI ì—¬í–‰ ìš”ì •'ì…ë‹ˆë‹¤.
                        ì‚¬ìš©ìëŠ” í•œêµ­ì¸ ì—¬í–‰ê°ì´ë©°, í˜„ì¬ ì•„ë˜ì™€ ê°™ì€ ì—¬í–‰ ì¼ì •ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                        ì¼ì • ë°ì´í„°: ${JSON.stringify(itineraryData)}

                        ë‹¹ì‹ ì˜ ì—­í• :
                        1. ì—¬í–‰ ì¼ì •ê³¼ ê´€ë ¨ëœ ì§ˆë¬¸ì— ë‹µë³€í•˜ê¸° (ì˜ˆ: "ì˜¤ëŠ˜ ì €ë… ì–´ë””ì•¼?", "ë””ì¦ˆë‹ˆëœë“œ ê°€ëŠ” ë²• ì•Œë ¤ì¤˜")
                        2. ì¼ì • ë‚´ ë¹ˆ ì‹œê°„ì´ë‚˜ ê·¼ì²˜ ë§›ì§‘/ì¹´í˜ ì¶”ì²œí•˜ê¸°.
                        3. ê°„ë‹¨í•œ ì—¬í–‰ ì¼ë³¸ì–´ ë²ˆì—­í•´ì£¼ê¸°.
                        4. ë‹µë³€ì€ í•œêµ­ì–´ë¡œ, ì¹œì ˆí•˜ê³  ì´ëª¨ì§€ë¥¼ ì„ì–´ì„œ ì§§ê³  ê°„ê²°í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”.
                        5. ì‚¬ìš©ìê°€ ì¶”ì²œ ë©”ë‰´ë¥¼ ë¬¼ì–´ë³´ë©´ ì¼ì •ì— ìˆëŠ” ì‹ë‹¹ì˜ ë©”ë‰´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ ì•ˆë‚´í•˜ì„¸ìš”.
                    `;

                    // Simple implementation: Send system prompt + user message history context roughly
                    // Constructing the full history for context
                    const historyContent = messages.map(m => ({
                        role: m.role,
                        parts: [{ text: m.text }]
                    }));
                    
                    // Add current message
                    historyContent.push({ role: 'user', parts: [{ text: userMessage }] });

                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: historyContent,
                                systemInstruction: { parts: [{ text: systemPrompt }] }
                            })
                        }
                    );

                    const data = await response.json();
                    
                    if (data.error) {
                         throw new Error(data.error.message);
                    }

                    const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "ì£„ì†¡í•´ìš”, ì ì‹œ ë¬¸ì œê°€ ìƒê²¼ì–´ìš”. ë‹¤ì‹œ ë¬¼ì–´ë´ ì£¼ì‹œê² ì–´ìš”?";
                    
                    setMessages(prev => [...prev, { role: 'model', text: aiResponse }]);

                } catch (error) {
                    console.error("Gemini API Error:", error);
                    setMessages(prev => [...prev, { role: 'model', text: "í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”. ğŸ’¦" }]);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter') handleSend();
            };

            if (!isOpen) return null;

            return (
                <div className="fixed bottom-20 right-4 w-[90vw] max-w-sm h-[60vh] bg-white rounded-3xl shadow-2xl border border-pink-100 flex flex-col z-50 animate-slideUp overflow-hidden font-pretendard">
                    {/* Chat Header */}
                    <div className="bg-gradient-to-r from-pink-500 to-rose-400 p-4 flex items-center justify-between text-white shrink-0">
                        <div className="flex items-center gap-2">
                            <Sparkles className="w-5 h-5 animate-pulse" />
                            <span className="font-bold text-lg">AI ì—¬í–‰ ìš”ì • âœ¨</span>
                        </div>
                        <button onClick={onClose} className="p-1 hover:bg-white/20 rounded-full transition-colors">
                            <X className="w-5 h-5" />
                        </button>
                    </div>

                    {/* Messages Area */}
                    <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-rose-50/30">
                        {messages.map((msg, idx) => (
                            <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                <div className={`max-w-[80%] px-4 py-2.5 rounded-2xl text-sm leading-relaxed shadow-sm ${
                                    msg.role === 'user' 
                                    ? 'bg-pink-500 text-white rounded-tr-none' 
                                    : 'bg-white text-gray-800 border border-pink-100 rounded-tl-none prose'
                                }`}>
                                    {msg.text}
                                </div>
                            </div>
                        ))}
                        {isLoading && (
                            <div className="flex justify-start">
                                <div className="bg-white px-4 py-3 rounded-2xl rounded-tl-none border border-pink-100 shadow-sm flex gap-1.5 items-center">
                                    <div className="w-1.5 h-1.5 bg-pink-400 rounded-full animate-bounce" style={{ animationDelay: '0s' }}></div>
                                    <div className="w-1.5 h-1.5 bg-pink-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                                    <div className="w-1.5 h-1.5 bg-pink-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                                </div>
                            </div>
                        )}
                        <div ref={messagesEndRef} />
                    </div>

                    {/* Input Area */}
                    <div className="p-3 bg-white border-t border-gray-100 shrink-0">
                        <div className="flex gap-2">
                            <input
                                type="text"
                                value={input}
                                onChange={(e) => setInput(e.target.value)}
                                onKeyPress={handleKeyPress}
                                placeholder="ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”..."
                                className="flex-1 px-4 py-2.5 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-pink-300 transition-all"
                            />
                            <button 
                                onClick={handleSend}
                                disabled={isLoading || !input.trim()}
                                className="p-2.5 bg-pink-500 text-white rounded-full hover:bg-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md shadow-pink-200"
                            >
                                <Send className="w-5 h-5" />
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- íƒ€ì„ë¼ì¸ ì•„ì´í…œ (ìˆ˜ì • ì—†ìŒ) ---
        const TimelineItem = ({ item }) => {
            const [isOpen, setIsOpen] = useState(false);
            const hasTransport = item.transports && item.transports.length > 0;

            return (
                <div className="relative pl-10 lg:pl-14 py-2">
                    <div className="absolute left-[19px] lg:left-[27px] -translate-x-1/2 w-3.5 h-3.5 rounded-full border-2 bg-white border-pink-400 z-10 top-3"></div>
                    <div className="absolute left-[18px] lg:left-[26px] top-4 bottom-0 w-0.5 bg-gradient-to-b from-pink-200 to-rose-100 -z-0"></div>
                    
                    <div className="flex flex-col">
                        <div className="flex flex-row items-start gap-3">
                            <span className="font-bold text-pink-500 text-[11px] lg:text-xs shrink-0 min-w-[3rem] mt-1 tracking-tight">{item.time}</span>
                            <div className="mt-0.5 shrink-0"><CategoryIcon type={item.category} /></div>
                            <div className="flex-1">
                                <div className="flex items-start justify-between">
                                    <div className="text-gray-900 font-bold text-xs lg:text-sm leading-snug mt-0.5">
                                        {item.content}
                                    </div>
                                    {hasTransport && (
                                        <button onClick={() => setIsOpen(!isOpen)} className={`ml-2 p-1 rounded-full transition-colors flex-shrink-0 ${isOpen ? 'bg-pink-100 text-pink-500' : 'bg-gray-100 text-gray-400 hover:bg-gray-200'}`}>
                                            {isOpen ? <ChevronUp size={14} /> : <ChevronDown size={14} />}
                                        </button>
                                    )}
                                </div>
                                {item.jp && <p className="text-[10px] lg:text-xs text-gray-500 mt-0.5 font-medium">{item.jp}</p>}
                            </div>
                        </div>
                        {hasTransport && isOpen && (
                            <div className="mt-2 space-y-2 animate-fadeIn ml-8">
                                {item.transports.map((trans, idx) => (
                                    <div key={idx} className="py-2 px-3 bg-white rounded-xl border border-gray-200 flex items-start gap-3 w-full shadow-sm">
                                        <Train className={`w-3.5 h-3.5 mt-0.5 shrink-0 ${trans.color === 'gray' ? 'text-gray-600' : trans.color === 'red' ? 'text-red-500' : trans.color === 'orange' ? 'text-orange-500' : trans.color === 'green' ? 'text-green-600' : trans.color === 'blue' ? 'text-blue-500' : trans.color === 'sky' ? 'text-sky-500' : 'text-pink-500'}`} />
                                        <div className="flex flex-col">
                                            <span className="font-bold text-gray-900 text-[10px] lg:text-xs">{trans.name}</span>
                                            <span className="text-gray-600 text-[10px] lg:text-xs mt-0.5 leading-relaxed">{trans.detail}</span>
                                            {trans.jp && <span className="text-gray-400 text-[9px] mt-0.5">{trans.jp}</span>}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- ë‚ ì§œë³„ ì•„ì½”ë””ì–¸ ì¹´ë“œ ---
        const DayCard = ({ data, isOpen, onClick }) => {
            return (
                <div className={`transition-all duration-300 rounded-3xl overflow-hidden border ${isOpen ? 'border-pink-300 shadow-xl bg-white scale-[1.01]' : 'border-white bg-white/80 hover:bg-white hover:shadow-md'}`}>
                    {/* Header - Always Visible */}
                    <div 
                        onClick={onClick}
                        className={`p-5 lg:p-6 cursor-pointer flex items-center justify-between transition-colors ${isOpen ? 'bg-gradient-to-r from-pink-50 to-white' : ''}`}
                    >
                        <div className="flex items-center gap-4">
                            <div className={`flex flex-col items-center justify-center w-12 h-12 rounded-2xl ${isOpen ? 'bg-pink-500 text-white shadow-lg shadow-pink-200' : 'bg-pink-100 text-pink-500'}`}>
                                <span className="text-[10px] font-medium leading-none mb-0.5">Day</span>
                                <span className="text-xl font-bold leading-none">{data.day}</span>
                            </div>
                            <div>
                                <div className="flex items-center gap-2">
                                    <span className="text-xs font-bold text-pink-500">{data.date}</span>
                                    {data.tag && <span className="px-2 py-0.5 bg-gray-100 text-gray-500 text-[10px] rounded-full font-bold">{data.tag}</span>}
                                </div>
                                <h3 className={`text-lg font-bold mt-0.5 ${isOpen ? 'text-gray-900' : 'text-gray-600'}`}>{data.title}</h3>
                            </div>
                        </div>
                        
                        <div className="flex items-center gap-3">
                            <a 
                                href={data.mapUrl} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                onClick={(e) => e.stopPropagation()}
                                className="hidden sm:flex items-center justify-center w-9 h-9 rounded-full bg-blue-50 text-blue-500 hover:bg-blue-100 transition-colors"
                            >
                                <MapIcon className="w-4 h-4" />
                            </a>
                            <div className={`w-8 h-8 flex items-center justify-center rounded-full transition-all duration-300 ${isOpen ? 'bg-pink-100 text-pink-500 rotate-180' : 'text-gray-400'}`}>
                                <ChevronDown className="w-5 h-5" />
                            </div>
                        </div>
                    </div>

                    {/* Body - Collapsible */}
                    {isOpen && (
                        <div className="px-4 pb-6 pt-0 animate-slideDown border-t border-pink-50">
                             <a 
                                href={data.mapUrl} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="sm:hidden mt-4 mb-2 flex items-center justify-center gap-2 w-full py-2.5 rounded-xl bg-blue-50 text-blue-600 font-bold text-sm hover:bg-blue-100 transition-colors"
                            >
                                <MapIcon className="w-4 h-4" /> ì§€ë„ ë³´ê¸°
                            </a>

                            <div className="mt-2">
                                {data.timeline.map((item, idx) => (
                                    <TimelineItem key={idx} item={item} />
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const TokyoTripGuide = () => {
            const [openDay, setOpenDay] = useState(1);
            const [isChatOpen, setIsChatOpen] = useState(false);

            const toggleDay = (day) => {
                setOpenDay(openDay === day ? null : day);
            };

            const itineraryData = [
                {
                    day: 1,
                    date: '1.28 (ìˆ˜)',
                    title: 'ë‚˜ë¦¬íƒ€ê³µí•­ & ë‹ˆí˜¼ë°”ì‹œ',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Narita+Airport&destination=Keio+Presso+Inn+Nihombashi+Kayabacho&travelmode=transit",
                    timeline: [
                        { 
                            time: '15:55', category: 'flight', content: 'ë‚˜ë¦¬íƒ€ ê³µí•­ ë„ì°© ë° ì…êµ­ ìˆ˜ì†', jp: 'æˆç”°ç©ºæ¸¯ (ë‚˜ë¦¬íƒ€ì¿ ì½”)',
                            transports: [
                                { name: 'ê²Œì´ì„¸ì´ ìŠ¤ì¹´ì´ì•¡ì„¸ìŠ¤', detail: 'ë‚˜ë¦¬íƒ€ê³µí•­ â†’ ë‹ˆí˜¼ë°”ì‹œì—­ (60ë¶„)', color: 'orange', jp: 'ã‚¹ã‚«ã‚¤ã‚¢ã‚¯ã‚»ã‚¹' },
                                { name: 'ë„ë³´', detail: 'ë‹ˆí˜¼ë°”ì‹œì—­ D2 ì¶œêµ¬ â†’ ìˆ™ì†Œ (ë„ë³´ 10ë¶„)', color: 'gray', jp: 'å¾’æ­© (í† í˜¸)' }
                            ]
                        },
                        { time: '18:30', category: 'accommodation', content: 'ìˆ™ì†Œ ì²´í¬ì¸ (ê²Œì´ì˜¤ í”„ë ˆì†Œ ì¸ ê°€ì•¼ë°”ì´ˆ)', jp: 'äº¬ç‹ãƒ—ãƒ¬ãƒƒã‚½ã‚¤ãƒ³ (ì¼€ì´ì˜¤ í”„ë ˆì†Œì¸)' },
                        { time: '19:00', category: 'cafe', content: 'í•˜ë¸ŒìŠ¤ ì½”ë ˆë„ ë‹ˆí˜¼ë°”ì‹œ (ì¼€ì´í¬)', jp: 'ãƒãƒ¼ãƒ–ã‚¹ (20:00 ë§ˆê° / 19:30 L.O)' },
                        { 
                            time: '20:00', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì €ë… ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ì´ë§ˆì¹´ì¸  ê¸´ì</span> : ë¶€ë“œëŸ¬ìš´ ë‹­ê°€ìŠ´ì‚´ ì¹´ì¸ ê°€ ì¼í’ˆì¸ ê³³</li>
                                        <li><span className="recommend-highlight">2. ì¸ ì§€í•œ</span> : í•´ì‚°ë¬¼ì´ ë“¬ë¿ ë“¤ì–´ê°„ ì œì´íƒ€ì¿ ë™ ë§›ì§‘</li>
                                        <li><span className="recommend-highlight">3. ì¹´ë„¤ì½” í•œë…¸ìŠ¤ì¼€</span> : í‘¸ì§í•œ ì—ë„ë§ˆì— í…ë™ ë³¸ì </li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ë‹ˆí˜¼ë°”ì‹œ/ê¸´ì ì§€ì—­' 
                        },
                        { 
                            time: '21:30', category: 'sightseeing', 
                            content: 'ë‹ˆí˜¼ë°”ì‹œ ë‹¤ë¦¬ & ê¸°ë¦°ìƒ (ì•¼ê²½)', 
                            jp: 'æ—¥æœ¬æ©‹ (ë‹ˆí˜¼ë°”ì‹œ / ìˆ™ì†Œ ë„ë³´ 5ë¶„)',
                            transports: [
                                { name: 'ë„ë³´', detail: 'ì‹ì‚¬ í›„ ê°€ë³ê²Œ ì‚°ì±… ë° ì‚¬ì§„ ì´¬ì˜', color: 'gray', jp: 'æ•£æ­© (ì‚°í¬)' }
                            ]
                        }
                    ]
                },
                {
                    day: 2,
                    date: '1.29 (ëª©)',
                    title: 'ë„ì¿„ ë””ì¦ˆë‹ˆëœë“œ',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Keio+Presso+Inn+Nihombashi+Kayabacho&destination=Tokyo+Disneyland&travelmode=transit",
                    timeline: [
                        { 
                            time: '08:00', category: 'accommodation', content: 'ìˆ™ì†Œ ì¶œë°œ', jp: 'å‡ºç™º (ìŠ›íŒŒì¸ )',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ ', detail: 'ê°€ì•¼ë°”ì´ˆ(H12) â†’ í•«ì´ˆë³´ë¦¬(H11) í•˜ì°¨', color: 'gray', jp: 'æ—¥æ¯”è°·ç·š (íˆë¹„ì•¼ì„¼)' },
                                { name: 'JR ê²Œì´ìš”ì„ ', detail: 'í•«ì´ˆë³´ë¦¬ â†’ ë§ˆì´í•˜ë§ˆì—­ (ë‚¨ìª½ ì¶œêµ¬)', color: 'red', jp: 'äº¬è‘‰ç·š (ì¼€ì´ìš”ì„¼)' }
                            ]
                        },
                        { time: '09:00', category: 'theme_park', content: 'ë„ì¿„ ë””ì¦ˆë‹ˆëœë“œ ì…ì¥', jp: 'ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰ (ë””ì¦ˆë‹ˆë€ë„)' },
                        { time: '13:00', category: 'food', content: 'íŒŒí¬ ë‚´ ì ì‹¬ (í”¼ì í¬íŠ¸ / ì¸„ëŸ¬ìŠ¤)', jp: 'ãƒ©ãƒ³ãƒ (ë€ì¹˜)' },
                        { time: '19:30', category: 'theme_park', content: 'í¼ë ˆì´ë“œ ê´€ëŒ ë° í‡´ì¥', jp: 'ãƒ‘ãƒ¬ãƒ¼ãƒ‰ (íŒŒë ˆ-ë„)' },
                        { 
                            time: '20:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì €ë… ë§›ì§‘ ì¶”ì²œ (ë„ì¿„ì—­ ë¼ë©˜)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ì†Œë¼ë…¸ì´ë¡œ</span> : ê¹”ë”í•œ ë¹„ê±´ ë¼ë©˜ & ì¤‘í™” ì†Œë°”</li>
                                        <li><span className="recommend-highlight">2. ë¡œì¿ ë¦°ìƒ¤</span> : ì§„í•œ êµ­ë¬¼ì˜ ì¸ ì¼€ë©˜ ìœ ëª… ë§›ì§‘ (ì›¨ì´íŒ… ì£¼ì˜)</li>
                                        <li><span className="recommend-highlight">3. ì´ì¹´ë£¨ê°€</span> : ì§„í•œ ëˆì½”ì¸  ë² ì´ìŠ¤ì˜ ë„ì¿„ì—­ ë¼ë©˜</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ë„ì¿„ì—­ ë¼ë©˜ ìŠ¤íŠ¸ë¦¬íŠ¸' 
                        }
                    ]
                },
                {
                    day: 3,
                    date: '1.30 (ê¸ˆ)',
                    title: 'ì•„í‚¤í•˜ë°”ë¼ & ë„ì¿„íƒ€ì›Œ',
                    tag: 'PASS 1ì¼ì°¨',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Keio+Presso+Inn+Nihombashi+Kayabacho&destination=Akihabara+Station&travelmode=transit",
                    timeline: [
                        { 
                            time: '10:00', category: 'sightseeing', content: 'ì•„í‚¤í•˜ë°”ë¼ ì´ë™', jp: 'ç§‹è‘‰åŸ (ì•„í‚¤í•˜ë°”ë¼)',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ ', detail: 'ê°€ì•¼ë°”ì´ˆ(H12) â†’ ì•„í‚¤í•˜ë°”ë¼(H15) (3ë²ˆ ì¶œêµ¬)', color: 'gray', jp: 'æ—¥æ¯”è°·ç·š' }
                            ]
                        },
                        { 
                            time: '12:00', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì ì‹¬ ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ê·œì¹´ì¸  ì´ì¹˜ë‹ˆì‚°</span> : ì•„í‚¤í•˜ë°”ë¼ ì¤„ì„œëŠ” ê·œì¹´ì¸  ë§›ì§‘</li>
                                        <li><span className="recommend-highlight">2. ë¡œìŠ¤íŠ¸ë¹„í”„ ì˜¤ë…¸</span> : ì‚°ì²˜ëŸ¼ ìŒ“ì•„ì£¼ëŠ” ë¡œìŠ¤íŠ¸ë¹„í”„ ë®ë°¥</li>
                                        <li><span className="recommend-highlight">3. íìŠˆ ì¥ê°€ë¼ ë¼ë©˜</span> : ì§„í•œ ëˆì½”ì¸  ë¼ë©˜ ì „ë¬¸ì </li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ì•„í‚¤í•˜ë°”ë¼ ì§€ì—­' 
                        },
                        { 
                            time: '13:30', category: 'shopping', content: 'ë¼ë””ì˜¤ íšŒê´€ & í•˜ë¹„ì½”ë¡œ í† ì´', jp: 'ãƒ©ã‚¸ã‚ªä¼šé¤¨ & ãƒãƒ“ã‚³ãƒ­ç©å…·',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ ', detail: 'ì•„í‚¤í•˜ë°”ë¼(H15) â†’ ê°€ë¯¸ì•¼ì´ˆ(H05) (1ë²ˆ ì¶œêµ¬)', color: 'gray', jp: 'æ—¥æ¯”è°·ç·š' }
                            ]
                        },
                        { time: '17:00', category: 'sightseeing', content: 'ë„ì¿„ íƒ€ì›Œ & ì•„ìë¶€ë‹¤ì´ íìŠ¤', jp: 'æ±äº¬ã‚¿ãƒ¯ãƒ¼ (í† ì¿„íƒ€ì™€-)' },
                        { 
                            time: '19:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì €ë… ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ì™€ë¼ì•¼í‚¤ì•¼</span> : ë°•ë ¥ ìˆëŠ” ê°€ë‹¤ë‘ì–´ ì§šë¶ˆêµ¬ì´ íƒ€ë‹¤í‚¤</li>
                                        <li><span className="recommend-highlight">2. ì•„í‚¤íƒ€ì•¼</span> : ì„œì„œ ë¨¹ëŠ” ë…¸í¬ ë¶„ìœ„ê¸°ì˜ ëª¨ì¸ ì•¼í‚¤(ë‚´ì¥êµ¬ì´)</li>
                                        <li><span className="recommend-highlight">3. ë©˜ì•¼ ë¬´ì‚¬ì‹œ</span> : ì°¨ìŠˆê°€ í¼ì§í•œ ì¸ ì¼€ë©˜/ë¼ë©˜ ë§›ì§‘</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'í•˜ë§ˆë§ˆì¸ ì´ˆ/ë‹¤ì´ëª¬ ì§€ì—­' 
                        }
                    ]
                },
                {
                    day: 4,
                    date: '1.31 (í† )',
                    title: 'ê¸´ì & ì‹œë°”ê³µì›(ë„ì¿„íƒ€ì›Œ)',
                    tag: 'PASS 2ì¼ì°¨',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Keio+Presso+Inn+Nihombashi+Kayabacho&destination=Roppongi+Hills&waypoints=Ginza+Station|Shiba+Park&travelmode=transit",
                    timeline: [
                        { 
                            time: '10:30', category: 'shopping', content: 'ê¸´ì ë„ì°© ë° ë°˜í´ë¦¬í”„ ì•„í ', jp: 'éŠ€åº§ (ê¸´ì) / ãƒ´ã‚¡ãƒ³ã‚¯ãƒªãƒ¼ãƒ•',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ ', detail: 'ê°€ì•¼ë°”ì´ˆ(H12) â†’ ê¸´ì(H08) (A3/B3 ì¶œêµ¬)', color: 'gray', jp: 'æ—¥æ¯”è°·ç·š' }
                            ]
                        },
                        { 
                            time: '13:00', category: 'food',
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì ì‹¬ ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ê¸´ì í…ì¿ ë‹ˆ</span> : 100ë…„ ì „í†µì˜ ìƒˆìš°íŠ€ê¹€ í…ë™</li>
                                        <li><span className="recommend-highlight">2. ê¸´ì ë°”ì´ë¦°</span> : íˆë ˆì¹´ì¸  ìƒŒë“œì™€ ëˆì¹´ì¸  ì •ì‹</li>
                                        <li><span className="recommend-highlight">3. ì‚¬í†  ìš”ìŠ¤ì¼€</span> : ìœ¤ê¸° ë‚˜ëŠ” ì´ë‚˜ë‹ˆì™€ ìš°ë™ ë§›ì§‘</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ê¸´ì ì§€ì—­'
                        },
                        { 
                            time: '15:00', category: 'sightseeing', content: 'ì‹œë°” ê³µì› & ì¡°ì¡°ì§€ (ë„ì¿„íƒ€ì›Œ ë·°)', jp: 'èŠå…¬åœ’ & å¢—ä¸Šå¯º (ì‹œë°”ì½”ì—”)',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ /ë„ë³´', detail: 'ê¸´ì â†’ ì¹´ë¯¸ì•¼ì´ˆ or ë„ë³´ ì´ë™', color: 'gray', jp: 'ç§»å‹•' }
                            ]
                        },
                        { 
                            time: '17:30', category: 'sightseeing', content: 'ë¡¯í°ê¸° íì¦ˆ (ì¼€ì•¼í‚¤ìì¹´ ì•¼ê²½)', jp: 'å…­æœ¬æœ¨ãƒ’ãƒ«ã‚º (ë¡¯í°ê¸° íˆë£¨ì¦ˆ)',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ ', detail: 'ì¹´ë¯¸ì•¼ì´ˆ â†’ ë¡¯í°ê¸°', color: 'gray', jp: 'æ—¥æ¯”è°·ç·š' }
                            ]
                        },
                        { 
                            time: '19:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì €ë… ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ê³¤íŒŒì¹˜ ë‹ˆì‹œì•„ìë¶€</span> : í‚¬ë¹Œ ì´¬ì˜ì§€, ìˆ¯ë¶ˆ ê¼¬ì¹˜êµ¬ì´ & ì†Œë°”</li>
                                        <li><span className="recommend-highlight">2. ì¸ ë£¨í†¤íƒ„</span> : ì„¸ìˆ«ëŒ€ì•¼ì²˜ëŸ¼ í° ê·¸ë¦‡ì— ë‚˜ì˜¤ëŠ” ìš°ë™</li>
                                        <li><span className="recommend-highlight">3. ì•„í‘¸ë¦¬ ë¼ë©˜</span> : ê¹”ë”í•œ ìœ ì ì†Œê¸ˆ ë¼ë©˜ (ë¡¯í°ê¸° íì¦ˆì )</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ë¡¯í°ê¸°/ë‹ˆì‹œì•„ìë¶€ ì§€ì—­' 
                        }
                    ]
                },
                {
                    day: 5,
                    date: '2.1 (ì¼)',
                    title: 'ì˜¤ë‹¤ì´ë°” & ê¸´ì',
                    tag: 'PASS 3ì¼ì°¨',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Keio+Presso+Inn+Nihombashi+Kayabacho&destination=Marunouchi+Illumination&waypoints=Pain+Maison+Ginza|Odaiba+Marine+Park|DiverCity+Tokyo+Plaza&travelmode=transit",
                    timeline: [
                        { 
                            time: '08:30', category: 'food',
                            content: <span>ì•„ì¹¨: <span className="recommend-highlight">íŒ ë©”ì¢… (ì†Œê¸ˆë¹µ / ë©”ë¡  ì†Œê¸ˆë¹µ / ì•™ë²„í„°)</span></span>, 
                            jp: 'ãƒ‘ãƒ³ãƒ»ãƒ¡ã‚¾ãƒ³ (ì˜¤í”ˆëŸ° ì¶”ì²œ)',
                            transports: [
                                { name: 'H íˆë¹„ì•¼ì„ /ë„ë³´', detail: 'ìˆ™ì†Œ â†’ ê¸´ìì‡ì´ˆë©” (ë„ë³´/ì§€í•˜ì² )', color: 'gray', jp: 'ç§»å‹•' }
                            ]
                        },
                        { 
                            time: '10:30', category: 'sightseeing', content: 'ì˜¤ë‹¤ì´ë°” í•´ë³€ê³µì› (ë ˆì¸ë³´ìš° ë¸Œë¦¬ì§€ ë·°)', jp: 'ãŠå°å ´æµ·æµœå…¬åœ’ (ì˜¤ë‹¤ì´ë°” ì¹´ì´íŒì½”ì—”)',
                            transports: [
                                { name: 'G ê¸´ìì„ /ìœ ë¦¬ì¹´ëª¨ë©”', detail: 'ê¸´ì â†’ ì‹ ë°”ì‹œ â†’ ì˜¤ë‹¤ì´ë°” í•´ë³€ê³µì›', color: 'blue', jp: 'ã‚†ã‚Šã‹ã‚‚ã‚ (ìœ ë¦¬ì¹´ëª¨ë©”)' }
                            ]
                        },
                        { 
                            time: '12:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì ì‹¬ ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ì¿ ì•„ì•„ì´ë‚˜</span> : ë ˆì¸ë³´ìš° ë¸Œë¦¬ì§€ ë·° ì•„ë³´ì¹´ë„ ë²„ê±°</li>
                                        <li><span className="recommend-highlight">2. ì¹´ë„¤ì½” í•œë…¸ìŠ¤ì¼€</span> : ë‹¤ì´ë²„ì‹œí‹° í‘¸ë“œì½”íŠ¸ ë‚´ í…ë™</li>
                                        <li><span className="recommend-highlight">3. ì¸ í‚¤ì§€ íƒ€ë§ˆ ìŠ¤ì‹œ</span> : ë±ìŠ¤ ë„ì¿„ ë¹„ì¹˜ ë‚´ ìŠ¤ì‹œ (ë¬´í•œë¦¬í•„/ë‹¨í’ˆ)</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ì˜¤ë‹¤ì´ë°” ì§€ì—­'
                        },
                        { time: '14:30', category: 'shopping', content: 'ë‹¤ì´ë²„ì‹œí‹° (ê±´ë‹´) êµ¬ê²½', jp: 'ãƒ€ã‚¤ãƒãƒ¼ã‚·ãƒ†ã‚£ (ë‹¤ì´ë°”ì‹œí‹°)' },
                        { 
                            time: '17:00', category: 'shopping', content: 'ê¸´ì/ìœ ë½ì´ˆ ë³µê·€', jp: 'éŠ€åº§ (ê¸´ì)',
                            transports: [
                                { name: 'ìœ ë¦¬ì¹´ëª¨ë©”/ì§€í•˜ì² ', detail: 'ì˜¤ë‹¤ì´ë°” â†’ ì‹ ë°”ì‹œ â†’ ìœ ë½ì´ˆ', color: 'gray', jp: 'ç§»å‹•' }
                            ]
                        },
                        { 
                            time: '19:00', category: 'sightseeing', content: 'ë§ˆë£¨ë…¸ìš°ì¹˜ ì¼ë£¨ë¯¸ë„¤ì´ì…˜', jp: 'ä¸¸ã®å†…ã‚¤ãƒ«ãƒŸãƒãƒ¼ã‚·ãƒ§ãƒ³',
                            transports: [
                                { name: 'ë„ë³´', detail: 'ìœ ë½ì´ˆ â†’ ë„ì¿„ì—­ (ë„ë³´ ì´ë™)', color: 'gray', jp: 'å¾’æ­©' }
                            ]
                        },
                        {
                            time: '20:00', category: 'food',
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì €ë… ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ë„¤ë¬´ë¡œ í•˜ë‚˜ë§ˆë£¨</span> : í‚¤í…Œ 5ì¸µ ì¸ê¸° íšŒì „ì´ˆë°¥ (ëŒ€ê¸° í•„ìˆ˜)</li>
                                        <li><span className="recommend-highlight">2. ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ í‚¤ì§€</span> : ë¯¸ìŠë­ ë¹•êµ¬ë¥´ë§ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤</li>
                                        <li><span className="recommend-highlight">3. ë©˜ì•¼ ì‹œì¹˜ì‚¬ì´</span> : ì£¼ë¬¸ ì¦‰ì‹œ ë©´ì„ ë½‘ì•„ì£¼ëŠ” ìˆ˜íƒ€ ë¼ë©˜</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ë„ì¿„ì—­/ë§ˆë£¨ë…¸ìš°ì¹˜ ì§€ì—­'
                        }
                    ]
                },
                {
                    day: 6,
                    date: '2.2 (ì›”)',
                    title: 'ì‹ ì£¼ì¿  & ì˜¤ëª¨í…Œì‚°ë„ & ì‹œë¶€ì•¼',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Keio+Presso+Inn+Nihombashi+Kayabacho&destination=Shibuya+Sky&waypoints=Isetan+Shinjuku|Omotesando+Hills&travelmode=transit",
                    timeline: [
                        { 
                            time: '10:30', category: 'shopping', content: 'ì‹ ì£¼ì¿  ì´ì„¸íƒ„ ë°±í™”ì  ì‡¼í•‘', jp: 'ä¼Šå‹¢ä¸¹ æ–°å®¿åº— (ì´ì„¸íƒ„ ì‹ ì£¼ì¿ )',
                            transports: [
                                { name: 'T í† ìì´ì„ ', detail: 'ê°€ì•¼ë°”ì´ˆ(T11) â†’ êµ¬ë‹¨ì‹œíƒ€ í™˜ìŠ¹ â†’ ì‹ ì£¼ì¿ ì‚°ì´ˆë©”(S02)', color: 'sky', jp: 'éƒ½å–¶æ–°å®¿ç·š' }
                            ]
                        },
                        { 
                            time: '12:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì ì‹¬ ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. êµì—” ë¡œì•ˆ</span> : ê¹”ë”í•œ ìš°ë™/ì†Œë°”ì™€ ë®ë°¥ ì •ì‹ (ì›” ì˜ì—…)</li>
                                        <li><span className="recommend-highlight">2. í†¤ì¹œ ë¼ë©˜</span> : ë¯¸ìŠë­ ë¹•êµ¬ë¥´ë§ ëˆì½”ì¸  ë¼ë©˜</li>
                                        <li><span className="recommend-highlight">3. ë‚˜ë² ì¡° ì‹ ì£¼ì¿ </span> : ìƒ¤ë¸Œìƒ¤ë¸Œ/ìŠ¤í‚¤ì•¼í‚¤ ë¬´í•œë¦¬í•„</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ì‹ ì£¼ì¿  ì‚°ì´ˆë©” ì§€ì—­'
                        },
                        { 
                            time: '14:30', category: 'sightseeing', content: 'ì˜¤ëª¨í…Œì‚°ë„ & ìº£ìŠ¤íŠ¸ë¦¬íŠ¸ (ë„ë³´ ì´ë™)', jp: 'è¡¨å‚é“ (ì˜¤ëª¨í…Œì‚°ë„)',
                            transports: [
                                { name: 'F í›„ì¿ í† ì‹ ì„ ', detail: 'ì‹ ì£¼ì¿ ì‚°ì´ˆë©” â†’ ë©”ì´ì§€ì§„êµ¬ë§ˆì— (í•˜ë¼ì£¼ì¿ )', color: 'gray', jp: 'å‰¯éƒ½å¿ƒç·š' },
                                { name: 'ë„ë³´', detail: 'í•˜ë¼ì£¼ì¿  â†’ ì˜¤ëª¨í…Œì‚°ë„ â†’ ìº£ìŠ¤íŠ¸ë¦¬íŠ¸ â†’ ì‹œë¶€ì•¼', color: 'gray', jp: 'æ•£æ­© (ì‚°í¬ ì½”ìŠ¤ ì¶”ì²œ)' }
                            ]
                        },
                        { 
                            time: '16:00', category: 'cafe', 
                            content: <span>ì¶”ì²œ ì¹´í˜: <span className="recommend-highlight">ë„í”„ìŠ¤ ì»¤í”¼ (ë¼ë–¼ / ë¸Œë¼ìš°ë‹ˆ / ìƒŒë“œìœ„ì¹˜)</span></span>,
                            jp: 'ãƒ©ãƒ«ãƒ•ã‚ºã‚³ãƒ¼ãƒ’ãƒ¼ (Ralph\'s Coffee)' 
                        },
                        { time: '17:30', category: 'sightseeing', content: 'ì‹œë¶€ì•¼ ìŠ¤ì¹´ì´ (ì˜ˆì•½ í•„ìˆ˜)', jp: 'æ¸‹è°·ã‚¹ã‚«ã‚¤ (ì‹œë¶€ì•¼ ìŠ¤ì¹´ì´)' },
                        { 
                            time: '19:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ì €ë… ë§›ì§‘ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ì½”í…Œê°€ì—ì‹œ</span> : ì§ì ‘ ë§Œë“¤ì–´ ë¨¹ëŠ” ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤/ëª¬ìì•¼í‚¤</li>
                                        <li><span className="recommend-highlight">2. ëª¬ì ëª¨í—¤ì§€</span> : ì‹œë¶€ì•¼ ìŠ¤í¬ë¨ë¸” ìŠ¤í€˜ì–´ ë‚´ ëª¬ìì•¼í‚¤</li>
                                        <li><span className="recommend-highlight">3. ìš°ì˜¤ë² ì´</span> : í„°ì¹˜íŒ¨ë“œë¡œ ì£¼ë¬¸í•˜ëŠ” ê°€ì„±ë¹„ íšŒì „ì´ˆë°¥</li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ì‹œë¶€ì•¼ ì§€ì—­' 
                        }
                    ]
                },
                {
                    day: 7,
                    date: '2.3 (í™”)',
                    title: 'ë‹ˆí˜¼ë°”ì‹œ & ë‚˜ë¦¬íƒ€ê³µí•­',
                    mapUrl: "https://www.google.com/maps/dir/?api=1&origin=Keio+Presso+Inn+Nihombashi+Kayabacho&destination=Narita+Airport&travelmode=transit",
                    timeline: [
                        { 
                            time: '09:00', category: 'accommodation', content: 'ì²´í¬ì•„ì›ƒ', jp: 'ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ (ì³‡ì¿ ì•„ìš°í† )',
                            transports: [
                                { name: 'ë„ë³´', detail: 'ìˆ™ì†Œ â†’ ë‹ˆí˜¼ë°”ì‹œì—­', color: 'gray', jp: 'å¾’æ­©' }
                            ]
                        },
                        { 
                            time: '10:00', category: 'flight', content: 'ë‹ˆí˜¼ë°”ì‹œì—­ íƒ‘ìŠ¹ (ê³µí•­í–‰)', jp: 'æ—¥æœ¬æ©‹é§… (ë‹ˆí˜¼ë°”ì‹œì—í‚¤)',
                            transports: [
                                { name: 'ê²Œì´ì„¸ì´ ìŠ¤ì¹´ì´ì•¡ì„¸ìŠ¤', detail: 'ë‹ˆí˜¼ë°”ì‹œì—­ â†’ ë‚˜ë¦¬íƒ€ ê³µí•­', color: 'orange', jp: 'ã‚¹ã‚«ã‚¤ã‚¢ã‚¯ã‚»ã‚¹' }
                            ]
                        },
                        { time: '11:10', category: 'shopping', content: 'ë‚˜ë¦¬íƒ€ ê³µí•­ ë„ì°© & ë©´ì„¸ì ', jp: 'æˆç”°ç©ºæ¸¯ (ë‚˜ë¦¬íƒ€ì¿ ì½”)' },
                        { 
                            time: '12:30', category: 'food', 
                            content: (
                                <div className="bg-white/50 rounded-lg p-2 border border-pink-100 mt-1">
                                    <span className="font-bold text-pink-600 text-xs block mb-1.5">ğŸ½ï¸ ê³µí•­ ì ì‹¬ ì¶”ì²œ (íƒ1)</span>
                                    <ul className="space-y-1.5 text-xs text-gray-700">
                                        <li><span className="recommend-highlight">1. ìŠ¤ì‹œ ì¿„íƒ€ì¸ </span> : ê³µí•­ í€„ë¦¬í‹°ë¥¼ ë„˜ì–´ì„œëŠ” ìŠ¤ì‹œ ë§›ì§‘</li>
                                        <li><span className="recommend-highlight">2. í† ë¯¸íƒ€ ë¼ë©˜</span> : ì¼ë³¸ ì œì¼ì˜ ì¸ ì¼€ë©˜ ë¶„ì  (4ì¸µ)</li>
                                        <li><span className="recommend-highlight">3. ê¸°ë„¤ì•¼ ë¬´ê¸°ë§ˆë£¨</span> : ê°€ë³ê²Œ ë¨¹ê¸° ì¢‹ì€ ìš°ë™ ì „ë¬¸ì </li>
                                    </ul>
                                </div>
                            ),
                            jp: 'ë‚˜ë¦¬íƒ€ê³µí•­ 1í„°ë¯¸ë„' 
                        },
                        { time: '14:00', category: 'flight', content: 'ì¸ì²œí–‰ KE704 íƒ‘ìŠ¹', jp: 'æ­ä¹— (í† ì£ )' }
                    ]
                }
            ];

            return (
                <div className="min-h-screen pb-20 relative">
                    <SakuraEffect />
                    
                    {/* Header */}
                    <div className="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-pink-100 px-6 py-5 flex items-center justify-between">
                         <div className="flex items-center gap-2 text-pink-500">
                            <Flower className="w-6 h-6 animate-spin-slow" />
                            <h1 className="text-xl font-extrabold tracking-tight text-gray-900">ë„ì¿„ ì—¬í–‰ <span className="text-sm font-normal text-pink-400 ml-1">2026</span></h1>
                        </div>
                        <div className="text-xs font-medium text-gray-500 bg-pink-50 px-3 py-1.5 rounded-full">
                            2026.1.28 - 2.3
                        </div>
                    </div>

                    {/* Content List */}
                    <div className="max-w-2xl mx-auto p-4 sm:p-6 space-y-4">
                        {itineraryData.map((data) => (
                            <DayCard 
                                key={data.day} 
                                data={data} 
                                isOpen={openDay === data.day} 
                                onClick={() => toggleDay(data.day)} 
                            />
                        ))}
                    </div>

                    {/* Floating Chat Button */}
                    <button 
                        onClick={() => setIsChatOpen(true)}
                        className="fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-tr from-pink-500 to-rose-400 text-white rounded-full shadow-lg hover:scale-110 transition-transform flex items-center justify-center z-40 border-2 border-white"
                    >
                        <Sparkles className="w-7 h-7" />
                    </button>

                    {/* Gemini Chat Modal */}
                    <GeminiChat 
                        isOpen={isChatOpen} 
                        onClose={() => setIsChatOpen(false)} 
                        itineraryData={itineraryData} 
                    />

                    {/* Bottom Info */}
                     <div className="text-center text-gray-400 text-xs pb-10">
                        Â© 2026 Tokyo Trip Guide
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TokyoTripGuide />);
    </script>
</body>
</html>